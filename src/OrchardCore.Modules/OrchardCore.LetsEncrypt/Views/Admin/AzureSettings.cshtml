@using Microsoft.Azure.Management.AppService.Fluent.Models
@model OrchardCore.LetsEncrypt.ViewModels.AzureSettingsViewModel

<h1>@RenderTitleSegments(T["Let's Encrypt - Azure Settings"])</h1>

<nav class="admin-toolbar">
    <ul class="navbar-nav mr-auto"></ul>
    <ul class="navbar-nav">
        <li class="nav-item">
            <a asp-route-action="Create" class="btn btn-primary" role="button">@T["Add Hostname"]</a>
        </li>
    </ul>
</nav>


<h3>@T["Hostnames"]</h3>
<ul class="list-group">
    @if (Model.HostNames.Any())
    {
        @foreach (var hostName in Model.HostNames)
        {
            <li class="list-group-item">
                <div class="properties">
                    <div class="related">
                        <a asp-action="Delete" asp-route-id="@hostName" class="btn btn-dark btn-sm" itemprop="UnsafeUrl">@T["Delete"]</a>
                    </div>
                    <span>@hostName</span>
                </div>
            </li>
        }
    }
    else
    {
        <div class="alert alert-info" role="alert">
            @T["There are no registered hostnames."]
        </div>
    }
</ul>

<h3 class="mt-3">@T["Hostname SSL Bindings"]</h3>
<ul class="list-group">
    @if (Model.HostNameSslStates.Any())
    {
        @foreach (var hostNameSslState in Model.HostNameSslStates)
        {
            <li class="list-group-item">
                <div class="properties">
                    <div>@hostNameSslState.Value.Name</div>
                    @if (!string.IsNullOrEmpty(hostNameSslState.Value.Thumbprint))
                    {
                        <code class="hint">Thumbprint: @hostNameSslState.Value.Thumbprint</code>
                    }
                    <div>
                        @switch (hostNameSslState.Value.SslState)
                        {
                            case SslState.Disabled:
                                <span class="badge badge-dark">@T["Disabled"]</span>
                                break;
                            case SslState.SniEnabled:
                                <span class="badge badge-info">@T["SNI Enabled"]</span>
                                break;
                            case SslState.IpBasedEnabled:
                                <span class="badge badge-success">@T["IP Based Enabled"]</span>
                                break;
                        }
                    </div>
                </div>
            </li>
        }
    }
    else
    {
        <div class="alert alert-info" role="alert">
            @T["There are no hostname SSL bindings."]
        </div>
    }
</ul>

<form asp-action="Install">
    <h3 class="mt-3">@T["Request and Install Certificate"]</h3>
    <div class="row">
        <div class="form-group col-md-6">
            <label for="Hostname">@T["Hostnames"]</label>
            <select name="Hostname" id="hostname" class="form-control" multiple="multiple" size="3" style="min-height: 0;">
                @foreach (var hostName in Model.HostNames.Where(h => !h.EndsWith("azurewebsites.net")))
                {
                    <option value="@hostName">@hostName</option>
                }
            </select>
        </div>
    </div>
    <div class="row">
        <div class="form-group col-md-6">
            <label for="Email">@T["Email"]</label>
            <input name="Email" id="email" class="form-control" />
            <span class="text-muted form-text small">@T["The email address to use for the Let's Encrypt account."]</span>
        </div>
    </div>
    <div class="row">
        <fieldset class="form-group col-md-12">
            <div class="custom-control custom-checkbox ">
                <input type="checkbox" id="use-staging" class="custom-control-input" name="UseStaging" />
                <label class="custom-control-label" for="use-staging">@T["Use Staging"]</label>
                <span class="hint">@T["â€” {0}", "You can only request 5 certificates per week for the same domain. If you are running test check this so you can make unlimited requests."]</span>
            </div>
        </fieldset>
    </div>
    <div class="row">
        <div class="form-group col-md-12">
            <button class="btn btn-primary" type="submit">@T["Request and install certificate"]</button>
        </div>
    </div>
</form>